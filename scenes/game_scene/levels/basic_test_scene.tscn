[gd_scene load_steps=22 format=3 uid="uid://dpr6mnd7ukuya"]

[ext_resource type="Script" uid="uid://dj6spr03iv5iq" path="res://scenes/game_scene/testscene.gd" id="1_pyd4g"]
[ext_resource type="Texture2D" uid="uid://d2a26soib85fm" path="res://assets/Artworks/Hokm tVG Main Menu Background.png" id="2_f4grl"]
[ext_resource type="Script" uid="uid://cyh0d64pfygbl" path="res://addons/maaacks_game_template/base/nodes/utilities/pause_menu_controller.gd" id="3_exaxi"]
[ext_resource type="Script" uid="uid://cypa7x3fkxgr" path="res://scripts/hokm_game_manager.gd" id="3_pyd4g"]
[ext_resource type="Script" uid="uid://cxuwke0pub027" path="res://scripts/rules_engine.gd" id="3_tmcbe"]
[ext_resource type="PackedScene" uid="uid://b0x8acab1b4oe" path="res://scenes/windows/pause_menu.tscn" id="4_b2thp"]
[ext_resource type="Script" uid="uid://dxbgl3telxva0" path="res://resources/Hand/player_hand.gd" id="5_m6rcj"]
[ext_resource type="PackedScene" uid="uid://cw2s6n4ya0dat" path="res://resources/Deck/Deck.tscn" id="5_m14oq"]
[ext_resource type="PackedScene" uid="uid://byqpo4bmpwdyh" path="res://resources/UI Elements/hokm_display_panel.tscn" id="6_f4grl"]
[ext_resource type="Texture2D" uid="uid://mdddrsbhdtq2" path="res://assets/Sprites/Cards/kenney_playing-cards-pack/PNG/Cards (medium)/card_clubs_suit.png" id="7_exaxi"]
[ext_resource type="Texture2D" uid="uid://cchmw36cn2iub" path="res://assets/Sprites/Cards/kenney_playing-cards-pack/PNG/Cards (medium)/card_hearts_suit.png" id="8_sl5y5"]
[ext_resource type="Script" uid="uid://byyymvlmevak6" path="res://resources/UI Elements/hakem_display.gd" id="8_xf0qg"]
[ext_resource type="Texture2D" uid="uid://kbvpimiey1to" path="res://assets/Sprites/Cards/kenney_playing-cards-pack/PNG/Cards (medium)/card_spades_suit.png" id="9_m6rcj"]
[ext_resource type="Texture2D" uid="uid://dbv01i82f2ybp" path="res://assets/Sprites/Misc/Anonymous Person Icon.png" id="10_d5kay"]
[ext_resource type="Texture2D" uid="uid://do1ovm5r6e6vt" path="res://assets/kenney_input-prompts/PlayStation Series/Vector/playstation_button_color_triangle.svg" id="10_obeue"]
[ext_resource type="Script" uid="uid://dftt5gfnf3hod" path="res://resources/Hand/ai_controller.gd" id="10_tmcbe"]
[ext_resource type="Texture2D" uid="uid://nphn56k8tao0" path="res://assets/Sprites/Cards/kenney_playing-cards-pack/PNG/Cards (medium)/card_diamonds_suit.png" id="10_xf0qg"]
[ext_resource type="PackedScene" uid="uid://d1lgf8q000ap" path="res://resources/CardSlot/card_slot.tscn" id="14_j7cxb"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_obeue"]
size = Vector2(704, 152)

[sub_resource type="Curve" id="Curve_d5kay"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.50625, 0.23595512), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="Curve" id="Curve_el8cj"]
_data = [Vector2(0.5, 0.22471917), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[node name="BasicHokmSetup" type="Node2D"]
script = ExtResource("1_pyd4g")

[node name="Background" type="TextureRect" parent="."]
z_index = -2
offset_left = -640.0
offset_top = -376.0
offset_right = 637.0
offset_bottom = 376.0
size_flags_horizontal = 0
mouse_filter = 2
texture = ExtResource("2_f4grl")
expand_mode = 1
metadata/_edit_lock_ = true

[node name="Panel" type="Panel" parent="."]
offset_left = -592.0
offset_top = -336.0
offset_right = -370.0
offset_bottom = -160.0

[node name="720x720Square" type="Panel" parent="."]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -360.0
offset_top = -360.0
offset_right = 360.0
offset_bottom = 360.0
grow_horizontal = 2
grow_vertical = 2

[node name="Timer" type="Timer" parent="."]
wait_time = 5.0

[node name="Game Manager" type="Node" parent="." node_paths=PackedStringArray("deck", "hands", "trick_slots", "ai_controllers", "rulesEngine")]
script = ExtResource("3_pyd4g")
deck = NodePath("../Deck")
hands = [NodePath("../PlayerHand"), NodePath("../EnemyHand1")]
trick_slots = [NodePath("../TableTrickSlots/TrickSlot"), NodePath("../TableTrickSlots/TrickSlot1")]
ai_controllers = [NodePath("../EnemyHand1/AIController")]
rulesEngine = NodePath("../Rule Umpire")

[node name="EndTurnTestBtn" type="Button" parent="Game Manager"]
anchors_preset = -1
anchor_left = 0.35625
anchor_right = 0.45078126
anchor_bottom = 0.08194444
text = "End Turn"
metadata/_edit_use_anchors_ = true

[node name="Rule Umpire" type="Node" parent="."]
script = ExtResource("3_tmcbe")

[node name="TurnKeeper" type="Node" parent="."]

[node name="PauseMenuController" type="Node" parent="."]
script = ExtResource("3_exaxi")
pause_menu_packed = ExtResource("4_b2thp")

[node name="Camera2D" type="Camera2D" parent="."]

[node name="Player" type="Node" parent="."]

[node name="Deck" parent="." instance=ExtResource("5_m14oq")]
z_index = 0
position = Vector2(-132, 0)

[node name="Hand Board" type="ColorRect" parent="."]
visible = false
visibility_layer = 512
offset_left = -352.0
offset_top = 179.0
offset_right = 352.0
offset_bottom = 331.0
mouse_filter = 2
color = Color(0.17254902, 0.13725491, 0.13725491, 1)

[node name="Area2D" type="Area2D" parent="Hand Board"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hand Board/Area2D"]
position = Vector2(352, 73)
shape = SubResource("RectangleShape2D_obeue")

[node name="Discard Slot" parent="." instance=ExtResource("14_j7cxb")]
position = Vector2(248, 0)
slot_type = 1

[node name="TableTrickSlots" type="Node" parent="."]

[node name="TrickSlot" parent="TableTrickSlots" instance=ExtResource("14_j7cxb")]
position = Vector2(64, 56)

[node name="TrickSlot1" parent="TableTrickSlots" instance=ExtResource("14_j7cxb")]
position = Vector2(64, -56)

[node name="PlayerHand" type="Node2D" parent="." node_paths=PackedStringArray("rulesEngine", "trick_slot")]
position = Vector2(64, 192)
script = ExtResource("5_m6rcj")
curve = SubResource("Curve_d5kay")
rotation_curve = SubResource("Curve_el8cj")
rulesEngine = NodePath("../Rule Umpire")
trick_slot = NodePath("../TableTrickSlots/TrickSlot")
is_player_controlled = true

[node name="PlayerIcon" type="TextureRect" parent="PlayerHand"]
offset_left = -64.0
offset_top = 32.0
offset_right = 64.0
offset_bottom = 168.0
texture = ExtResource("10_d5kay")
expand_mode = 1

[node name="EnemyHand1" type="Node2D" parent="." node_paths=PackedStringArray("rulesEngine", "trick_slot")]
position = Vector2(64, -192)
script = ExtResource("5_m6rcj")
rulesEngine = NodePath("../Rule Umpire")
trick_slot = NodePath("../TableTrickSlots/TrickSlot1")

[node name="PlayerIcon1" type="TextureRect" parent="EnemyHand1"]
offset_left = -64.0
offset_top = -168.0
offset_right = 64.0
offset_bottom = -32.0
texture = ExtResource("10_d5kay")
expand_mode = 1

[node name="AIController" type="Node" parent="EnemyHand1"]
script = ExtResource("10_tmcbe")

[node name="AITestingBtn" type="Button" parent="EnemyHand1"]
offset_left = -184.0
offset_top = -112.0
offset_right = -82.0
offset_bottom = -53.0
text = "Test AI"
metadata/_edit_use_anchors_ = true

[node name="EnemyHand2 (Placeholder)" type="Node2D" parent="."]
visible = false
position = Vector2(448, 0)
script = ExtResource("5_m6rcj")

[node name="PlayerIcon2" type="TextureRect" parent="EnemyHand2 (Placeholder)"]
offset_left = 40.0
offset_top = -72.0
offset_right = 168.0
offset_bottom = 64.0
texture = ExtResource("10_d5kay")
expand_mode = 1

[node name="AIController" type="Node" parent="EnemyHand2 (Placeholder)" node_paths=PackedStringArray("rulesEngine")]
script = ExtResource("10_tmcbe")
rulesEngine = NodePath("../../Rule Umpire")

[node name="EnemyHand3 (Placeholder)" type="Node2D" parent="."]
visible = false
position = Vector2(-320, 0)
script = ExtResource("5_m6rcj")

[node name="PlayerIcon3" type="TextureRect" parent="EnemyHand3 (Placeholder)"]
offset_top = -64.0
offset_right = 128.0
offset_bottom = 72.0
texture = ExtResource("10_d5kay")
expand_mode = 1

[node name="AIController" type="Node" parent="EnemyHand3 (Placeholder)"]
script = ExtResource("10_tmcbe")

[node name="Player Deck Pile" type="Panel" parent="."]
offset_left = -592.0
offset_top = 104.0
offset_right = -370.0
offset_bottom = 331.0
mouse_filter = 2

[node name="Label" type="Label" parent="Player Deck Pile"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.14414415
anchor_top = 0.03524229
anchor_right = 0.9009009
anchor_bottom = 0.12887524
text = "Your Decks"
horizontal_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="CardSlot" parent="Player Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(48, 186)

[node name="CardSlot2" parent="Player Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(48, 56)

[node name="CardSlot3" parent="Player Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(176, 186)

[node name="CardSlot4" parent="Player Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(176, 56)

[node name="CardSlot5" parent="Player Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(48, 120)

[node name="CardSlot6" parent="Player Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(112, 120)

[node name="CardSlot7" parent="Player Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(176, 120)

[node name="Opponent Deck Pile" type="Panel" parent="."]
offset_left = 384.0
offset_top = -336.0
offset_right = 600.0
offset_bottom = -152.0
mouse_filter = 2

[node name="Deck Label" type="Label" parent="Opponent Deck Pile"]
layout_mode = 0
offset_left = 23.0
offset_right = 191.0
offset_bottom = 25.0
text = "Opponent Decks"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CardSlot" parent="Opponent Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(136, 130)

[node name="CardSlot2" parent="Opponent Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(40, 89)

[node name="CardSlot3" parent="Opponent Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(88, 130)

[node name="CardSlot4" parent="Opponent Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(136, 57)

[node name="CardSlot5" parent="Opponent Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(184, 130)

[node name="CardSlot6" parent="Opponent Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(88, 57)

[node name="CardSlot7" parent="Opponent Deck Pile" instance=ExtResource("14_j7cxb")]
position = Vector2(184, 57)

[node name="Hakem Display Label" type="Label" parent="."]
offset_left = -520.0
offset_top = -304.0
offset_right = -393.0
offset_bottom = -281.0
theme_override_font_sizes/font_size = 22
text = "Hakem:"
vertical_alignment = 1
script = ExtResource("8_xf0qg")

[node name="TextureRect" type="TextureRect" parent="Hakem Display Label"]
layout_mode = 0
offset_left = -56.0
offset_top = -16.0
offset_right = -8.0
offset_bottom = 32.0
texture = ExtResource("10_obeue")
expand_mode = 1

[node name="Hokm Display Label" parent="." instance=ExtResource("6_f4grl")]
offset_left = -520.0
offset_top = -256.0
offset_right = -393.0
offset_bottom = -233.0

[node name="Clubs" type="TextureButton" parent="."]
visible = false
offset_left = 384.0
offset_top = 5.000004
offset_right = 440.0
offset_bottom = 61.00002
scale = Vector2(1.680001, 1.7999998)
texture_normal = ExtResource("7_exaxi")
stretch_mode = 0

[node name="Hearts" type="TextureButton" parent="."]
visible = false
offset_left = 384.0
offset_top = -101.0
offset_right = 440.0
offset_bottom = -45.0
scale = Vector2(1.680001, 1.7999998)
texture_normal = ExtResource("8_sl5y5")
stretch_mode = 0

[node name="Spades" type="TextureButton" parent="."]
visible = false
offset_left = 480.0
offset_top = -101.0
offset_right = 536.0
offset_bottom = -45.0
scale = Vector2(1.680001, 1.7999998)
texture_normal = ExtResource("9_m6rcj")
stretch_mode = 0

[node name="Diamonds" type="TextureButton" parent="."]
visible = false
offset_left = 480.0
offset_top = 5.000004
offset_right = 536.0
offset_bottom = 61.000004
scale = Vector2(1.680001, 1.7999998)
texture_normal = ExtResource("10_xf0qg")
stretch_mode = 0

[node name="Tutorial Overlay Button" type="Button" parent="."]
offset_left = -536.0
offset_top = 32.0
offset_right = -434.0
offset_bottom = 91.0
text = "Tutorial"

[connection signal="pressed" from="Game Manager/EndTurnTestBtn" to="Game Manager" method="_on_end_turn_test_btn_pressed"]
[connection signal="card_drawn" from="Deck" to="Game Manager" method="_on_card_drawn"]
[connection signal="pressed" from="EnemyHand1/AITestingBtn" to="EnemyHand1/AIController" method="_on_ai_testing_btn_pressed"]
[connection signal="pressed" from="Clubs" to="Game Manager" method="_on_clubs_pressed"]
[connection signal="pressed" from="Hearts" to="Game Manager" method="_on_hearts_pressed"]
[connection signal="pressed" from="Spades" to="Game Manager" method="_on_spades_pressed"]
[connection signal="pressed" from="Diamonds" to="Game Manager" method="_on_diamonds_pressed"]
